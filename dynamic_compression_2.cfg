
instance = dynamiccompression_live


nchannels_in = 2
fragsize = 64
srate = 44100

mhalib = transducers

iolib = MHAIOJack

mha.plugin_name = overlapadd


mha.calib_in.peaklevel = [100 100]
mha.calib_in.fir = [[1 0 0];[1 0 0]]
mha.calib_out.peaklevel = [100 100]
mha.calib_out.fir = [[]]


mha.calib_out.softclip.tau_attack = 0.002
mha.calib_out.softclip.tau_decay = 0.005
mha.calib_out.softclip.threshold = 0.6
mha.calib_out.softclip.slope = 0.5
mha.calib_out.softclip.tau_clip = 1
mha.calib_out.softclip.max_clipped = 1


mha.calib_out.do_clipping = no


mha.overlapadd.plugin_name = mhachain


mha.overlapadd.fftlen = 256

mha.overlapadd.wnd.type = hanning
mha.overlapadd.wnd.user = []
mha.overlapadd.wnd.len = 128
mha.overlapadd.wnd.pos = 0.5
mha.overlapadd.wnd.exp = 1

mha.overlapadd.zerownd.type = rect


mha.overlapadd.zerownd.user = []



# MHA CHAIN PLUGINS

mha.overlapadd.mhachain.algos = [fftfilterbank dc combinechannels]
mha.overlapadd.mhachain.fftfilterbank.unit = Hz
mha.overlapadd.mhachain.fftfilterbank.f = [177 297 500 841 1414 2378 4000 6727 11314]
mha.overlapadd.mhachain.fftfilterbank.fscale = log
mha.overlapadd.mhachain.fftfilterbank.ovltype = rect
mha.overlapadd.mhachain.fftfilterbank.ftype = center


# DYNAMIC COMPRESSION

# gaintable data in dB gains --> NEED TO CHANGE THIS TO OUR INPUT VARIABLE [does caller from matlab already achieve this?]

mha.overlapadd.mhachain.dc.gtdata = [...
[-32.99	-32.99	-32.99	-32.99	-32.99	-32.99 -32.99	-32.99	-32.99	-32.99	-32.99	-32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99 -32.99]; ...
[-23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398 -23.9968377223398]; ...
[-12.9990000000000 -12.9990000000000 -12.999 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.99900000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000]; ...
[-4.90000000000000 -4.90000000000000 -4.90000000000000 -4.9 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000 -4.90000000000000]; ...
[-12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000 -12.9990000000000]; ...
[-14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000 -14.9990000000000]; ...
[-13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000 -13.9990000000000]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]; ...
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]]


mha.overlapadd.mhachain.dc.gtmin = [0]
mha.overlapadd.mhachain.dc.gtstep = [4] # need to check this value

## LPF Params
mha.overlapadd.mhachain.dc.tau_attack = [0.02]
mha.overlapadd.mhachain.dc.tau_decay = [0.1]


mha.overlapadd.mhachain.dc.fb = fftfilterbank
mha.overlapadd.mhachain.dc.chname = fftfilterbank_nchannels
mha.overlapadd.mhachain.combinechannels.outchannels = 2


# need to tame I/O setting for JACK?
io.con_in = [system:capture_1 system:capture_2]
io.con_out = [system:playback_1 system:playback_2]

